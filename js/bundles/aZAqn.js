var pageComponent=webpackJsonppageComponent([29],{276:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),l=o(i),d=n(2),m=o(d);n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15);var p=n(277),c=o(p),u=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(l.default);m.default.register(u,c.default),t.default=u},277:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.templates=t.aZAqn=void 0;var i,l=n(1),d=o(l),m=n(2),p=o(m);goog.loadModule(function(e){function t(e,t,o){var i=function(){r("h6");var t=e.page.description;"function"==typeof t?t():null!=t&&s(t),a("h6"),r("article",null,null,"id","1"),r("h2"),s("MVC Portlet"),a("h2"),r("p"),s("Web applications are often developed following the Model View Controller (MVC) pattern. But Liferay has developed a different implementation for the MVC model. The Liferay MVC portlet framework is light, it hides part of the complexity of portlets, and it makes the most common operations easier."),a("p"),r("p"),s("In MVC pattern, there are three layers:"),a("p"),r("ul"),r("li"),r("strong"),s("Model:"),a("strong"),s(" The model layer holds the application data and logic for manipulating it."),a("li"),r("li"),r("strong"),s("View:"),a("strong"),s(" The view layer contains logic for displaying data."),a("li"),r("li"),r("strong"),s("Controller:"),a("strong"),s(" The middle man in the MVC pattern, the Controller contains logic for passing the data back and forth between the view and the model layers."),a("li"),a("ul"),r("p"),r("img",null,null,"src","/images/portlet.png"),a("img"),a("p"),r("p"),s("Liferay’s applications are divided into multiple discrete modules. With Service Builder, the model layer is generated into a "),r("strong"),s("service"),a("strong"),s(" and an  "),r("strong"),s("api"),a("strong"),s(" module. That accounts for the model in the MVC pattern. The view and the controller share a module, the  "),r("strong"),s("web"),a("strong"),s(" module."),a("p"),r("p"),s("In a larger application, Liferay provides MVC command classes to break up your controller functionality:"),a("p"),r("ul"),r("li"),r("strong"),s("MVCActionCommand:"),a("strong"),s(" Use -ActionCommand classes to hold each of your portlet actions, which are invoked by action URLs."),a("li"),r("li"),r("strong"),s("MVCRenderCommand:"),a("strong"),s(" Use -RenderCommand classes to hold a render method that dispatches to the appropriate JSP, by responding to render URLs."),a("li"),r("li"),r("strong"),s("MVCResourceCommand:"),a("strong"),s(" Use -ResourceCommand classes to execute resource serving in your MVC portlet, by responding to resource URLs."),a("li"),a("ul"),a("article"),r("article",null,null,"id","2"),r("h2"),s("MVC Action Command"),a("h2"),r("p"),s("Liferay’s MVC framework lets you split your portlet’s action methods into separate classes. This can be very helpful in portlets that have many actions. Each action URL in your portlet’s JSPs then calls the appropriate action class when necessary."),a("p"),r("p"),s("First, use the <portlet:actionURL> tag to create the action URL in your JSP. For example, the edit blog entry action in Liferay’s Blogs app is defined in the "),r("strong"),s("edit_entry.jsp"),a("strong"),s(" file as follows:"),a("p"),l({code:'<portlet:actionURL name="/blogs/edit_entry" var="editEntryURL" />',mode:"xml"},null,o),r("p"),s("When the action URL is triggered, the matching action class processes the action. Implement the action by creating a class that implements the "),r("strong"),s("MVCActionCommand"),a("strong"),s(" interface. To avoid writing oodles of boilerplate code, your *"),r("strong"),s("MVCActionCommand"),a("strong"),s(" class should extend the "),r("strong"),s("BaseMVCActionCommand"),a("strong"),s(" class instead of implementing "),r("strong"),s("MVCActionCommand"),a("strong"),s(" directly. The "),r("strong"),s("BaseMVCActionCommand"),a("strong"),s(" class already implements "),r("strong"),s("MVCActionCommand"),a("strong"),s(" and provides many useful method implementations. Naming your "),r("strong"),s("MVCActionCommand"),a("strong"),s(" class after the action it performs is a good convention. For example, if your action edits some kind of entry, you could name its class "),r("strong"),s("EditEntryMVCActionCommand"),a("strong"),s("."),a("p"),r("p"),s("Your *"),r("strong"),s("MVCActionCommand"),a("strong"),s(" class must also have a "),r("strong"),s("@Component"),a("strong"),s(" annotation like the following. Set the property "),r("strong"),s("javax.portlet.name"),a("strong"),s(" to your portlet’s internal ID, and the property "),r("strong"),s("mvc.command.name"),a("strong"),s(" to the value of the "),r("strong"),s("name"),a("strong"),s(" property in your JSP’s matching "),r("strong"),s("actionURL"),a("strong"),s(". To register the component in the OSGi container as using the "),r("strong"),s("MVCActionCommand"),a("strong"),s(" class, you must set the "),r("strong"),s("service"),a("strong"),s(" property to "),r("strong"),s("MVCActionCommand.class"),a("strong"),s(":"),a("p"),l({code:'@Component(\n    immediate = true,\n    property = {\n        "javax.portlet.name=your_portlet_name_YourPortlet",\n        "mvc.command.name=/your/jsp/action/url"\n    },\n    service = MVCActionCommand.class\n)\npublic class YourMVCActionCommand extends BaseMVCActionCommand {\n  // implement your action\n}',mode:"Javascript"},null,o),r("p"),s("For example, this is the "),r("strong"),s("@Component"),a("strong"),s(" annotation for the Blogs app’s "),r("strong"),s("EditEntryMVCActionCommand"),a("strong"),s(" class:"),a("p"),l({code:'@Component(\n    immediate = true,\n    property = {\n        "javax.portlet.name=" + BlogsPortletKeys.BLOGS,\n        "javax.portlet.name=" + BlogsPortletKeys.BLOGS_ADMIN,\n        "javax.portlet.name=" + BlogsPortletKeys.BLOGS_AGGREGATOR,\n        "mvc.command.name=/blogs/edit_entry"\n    },\n    service = MVCActionCommand.class\n)\npublic class EditEntryMVCActionCommand extends BaseMVCActionCommand {\n    // the app\'s edit blog entry action implementation\n}',mode:"javascript"},null,o),r("p"),s("Note that you can use multiple "),r("strong"),s("javax.portlet.name"),a("strong"),s(" values to indicate the component works with multiple portlets."),a("p"),r("p"),s("In your *"),r("strong"),s("MVCActionCommand"),a("strong"),s(" class, process the action by overriding the "),r("strong"),s("BaseMVCActionCommand"),a("strong"),s(" class’s doProcessAction method. This method takes "),r("strong"),s("javax.portlet.ActionRequest"),a("strong"),s(" and "),r("strong"),s("javax.portlet.ActionResponse");a("strong"),s(" parameters that you can use to process your action. Your "),r("strong"),s("MVCActionCommand"),a("strong"),s(" class should also contain any other code required to implement your action."),a("p"),a("article"),r("article",null,null,"id","3"),r("h2"),s("MVC Render Command"),a("h2"),r("p"),s("MVCRenderCommand is used to respond to portlet render URLs. To use MVC render commands, you need these things:"),a("p"),r("ul"),r("li"),s("An implementation of the MVCRenderCommand interface."),a("li"),r("li"),s("A portlet render URL in your view layer."),a("li"),r("li"),s("A Component that publishes the MVCRenderCommand service, with two properties"),a("li"),a("ul"),r("h5"),s("Implementing MVCRenderCommand"),a("h5"),r("p"),s("What is it you want to do when a portlet render URL is invoked? Using the "),r("strong"),s("mvcRenderCommandName"),a("strong"),s(" parameter, direct the request to an "),r("strong"),s("MVCRenderCommand"),a("strong"),s(" implementation. Now override the "),r("strong"),s("render"),a("strong"),s(" method."),a("p"),r("p"),s("Some "),r("strong"),s("MVCRenderCommand"),a("strong"),s(" will simply render a particular JSP. Here’s what "),r("strong"),s("BlogsViewMVCRenderCommand"),a("strong"),s(" looks like:"),a("p"),l({code:'@Override\npublic String render(\n    RenderRequest renderRequest, RenderResponse renderResponse) {\n\n    return "/blogs/view.jsp";\n}',mode:"js"},null,o),r("p"),s("Sometimes you’ll want to add logic to render a certain JSP based on one or more conditions:"),a("p"),l({code:'@Override\npublic String render(\n    RenderRequest renderRequest, RenderResponse renderResponse)\n    throws PortletException {\n\n    try {\n        ActionUtil.getEntry(renderRequest);\n    }\n    catch (Exception e) {\n        if (e instanceof NoSuchEntryException ||\n            e instanceof PrincipalException) {\n\n            SessionErrors.add(renderRequest, e.getClass());\n\n            return "/hello/error.jsp";\n        }\n        else {\n            throw new PortletException(e);\n        }\n    }\n\n    return "/hello/edit_entry.jsp";\n}',mode:"js"},null,o),r("p"),s("If there’s an error caught following the call to "),r("strong"),s("ActionUtil.getEntry"),a("strong"),s(" in the code above, the error.jsp is rendered. If the call is returned without an exception being caught, "),r("strong"),s("edit_entry.jsp"),a("strong"),s(" is rendered."),a("p"),r("p"),s("How does a request get directed to your MVC render command? Using a portlet render URL."),a("p"),r("h5"),s("Creating a Portlet Render URL"),a("h5"),r("p"),s("You can generate a render URL for your portlet using the <portlet:renderURL>\\ taglib. To invoke your MVC render command from the render URL, you need to specify the parameter "),r("strong"),s("mvcRenderCommandName"),a("strong"),s(" with the same value as your Component property "),r("strong"),s("mvc.command.name"),a("strong"),s("."),a("p"),r("p"),s("For example, you can create a URL that directs the user to a page with a form for editing an entry like this (in a JSP):"),a("p"),l({code:'<portlet:renderURL var="editEntryURL">\n    <portlet:param name="mvcRenderCommandName" value="/hello/edit_entry" />\n    <portlet:param name="entryId" value="<%= String.valueOf(entry.getEntryId()) %>" />\n</portlet:renderURL>',mode:"xml"},null,o),r("p"),s("Now the request will contain a parameter named "),r("strong"),s("mvcRenderCommandName"),a("strong"),s(". To find the proper MVC render command, the OSGi runtime needs to have a "),r("strong"),s("mvc.command.name"),a("strong"),s(" property with a matching value."),a("p"),r("h5"),s("Registering the MVC Render Command"),a("h5"),r("p"),s("In order to respond to a particular render URL, you need an "),r("strong"),s("MVCRenderCommand"),a("strong"),s(" Component that with two properties:"),a("p"),l({code:'javax.portlet.name=" + HelloWorldPortletKeys.HELLO_WORLD,"\nmvc.command.name=/hello/edit_entry',mode:"Js"},null,o),r("p"),s("Using the above properties as an example, any portlet render URL for the portlet that includes a parameter called "),r("strong"),s("mvcRenderCommand"),a("strong"),s(" with the value "),r("strong"),s("/hello/edit_entry"),a("strong"),s(" will be handled by this "),r("strong"),s("MVCRenderCommand"),a("strong"),s("."),a("p"),r("p"),s("The Component must also publish a "),r("strong"),s("MVCRenderCommand.class"),a("strong"),s(" service to the OSGi runtime. Here’s a basic Component that publishes an MVC render command:"),a("p"),l({code:'@Component(\n    immediate = true,\n    property = {\n       "javax.portlet.name=" + HelloWorldPortletKeys.HELLO_WORLD,\n       "mvc.command.name=/hello/edit_entry"\n    },\n    service = MVCRenderCommand.class\n)\npublic class EditEntryMVCRenderCommand implements MVCRenderCommand {',mode:"Js"},null,o),r("p"),s("One command can be used by one portlet, as the example above shows. If you want, one command can be used for multiple portlets by adding more "),r("strong"),s("javax.portlet.name entries"),a("strong"),s(" in the property list. Likewise, multiple commands can invoke the MVC command class by adding more "),r("strong"),s("mvc.command.name"),a("strong"),s(" entries. If you’re really feeling wild, you can specify multiple portlets and multiple command URLs in the same command component, like this:"),a("p"),l({code:'@Component(\n    immediate = true,\n    property = {\n       "javax.portlet.name=" + HelloWorldPortletKeys.HELLO_MY_WORLD,\n       "javax.portlet.name=" + HelloWorldPortletKeys.HELLO_WORLD,\n       "mvc.command.name=/hello/edit_super_entry",\n       "mvc.command.name=/hello/edit_entry"\n    },\n    service = MVCRenderCommand.class\n)',mode:"Js"},null,o),r("p"),s("More details, access "),r("a",null,null,"href","https://dev.liferay.com/develop/tutorials/-/knowledge_base/7-0/liferay-mvc-portlet"),s("dev.liferay"),a("a"),s("."),a("p"),a("article"),r("input",null,null,"type","hidden","value",e.page.title),a("input"),r("input",null,null,"type","hidden","value",e.site.title),a("input")};d(n.$$assignDefaults({content:i},e),null,o)}goog.module("aZAqn.incrementaldom");var n=goog.require("soy");goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var o=goog.require("incrementaldom"),r=o.elementOpen,a=o.elementClose,s=(o.elementVoid,o.elementOpenStart,o.elementOpenEnd,o.text),l=(o.attr,p.default.getTemplate("ElectricCode.incrementaldom","render")),d=p.default.getTemplate("guide.incrementaldom","render");return e.render=t,goog.DEBUG&&(t.soyTemplateName="aZAqn.render"),e.render.params=["page","site"],e.render.types={page:"?",site:"?"},e.templates=i=e,e});var c=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(d.default);p.default.register(c,i),t.aZAqn=c,t.templates=i,t.default=i}},[276]);